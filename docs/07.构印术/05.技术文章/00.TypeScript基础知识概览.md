---
title: TypeScriptåŸºç¡€çŸ¥è¯†æ¦‚è§ˆ
date: 2021-03-02 11:50:09
permalink: /pages/4b69e5/
categories:
  - æ„å°æœ¯
  - æŠ€æœ¯æ–‡ç« 
tags:**---
# ä¸»é¢˜åˆ—è¡¨ï¼šjuejin, github, smartblue, cyanosis, channing-cyan, fancy, hydrogen, condensed-night-purple, greenwillow, v-green, vue-pro, healer-readable, mk-cute, jzman, geek-black, awesome-green, qklhk-chocolate
# è´¡çŒ®ä¸»é¢˜ï¼šhttps://github.com/xitu/juejin-markdown-themes
theme: geek-black
highlight:
---

![](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/aaca5b86f57d49d7b6845073255af17b~tplv-k3u1fbpfcp-watermark.image)

### è¯´æ˜

æœ¬æ–‡ç»“æ„å…¨éƒ¨é‡‡ç”¨æ— åºåˆ—è¡¨ï¼Œæ˜¯å¯¹ TS åŸºç¡€çŸ¥è¯†çš„æ¦‚è§ˆï¼Œå‘ç°è¿™ç§ç»“æ„é˜…è¯»èµ·æ¥æ›´é¡ºç•…ï¼Œæ¯”é‚£ç§åˆ†å±‚æ¬¡çš„å‡å°‘äº†ä¸€å±‚å¤§è„‘åŠ å·¥ã€‚

### æ­£æ–‡

- ä¸ºä»€ä¹ˆä½¿ç”¨ TypeScript
  - å‰æï¼šJavaScript æ˜¯ä¸€é—¨åŠ¨æ€ç±»å‹è¯­è¨€ï¼Œè®¸å¤šä½çº§é”™è¯¯ï¼ˆç±»å‹é”™è¯¯ï¼‰æ— æ³•åœ¨å¼€å‘é˜¶æ®µå‘ç°ï¼Œä¸ºäº†å‡å°‘ bug å‡ºç°å‡ ç‡ï¼Œéœ€è¦ç»™ JavaScript åŠ å…¥ç±»å‹å®šä¹‰æ–¹ä¾¿åœ¨ç¼–å†™ä»£ç é˜¶æ®µå‘ç°é”™è¯¯ã€‚
- TypeScript æ˜¯ä»€ä¹ˆï¼Ÿ
  - TypeScript æ˜¯ JavaScript çš„è¶…é›†ï¼Œå¯ä»¥ç†è§£ä¸ºåŠ å…¥äº†ç±»å‹å®šä¹‰çš„ JavaScript è¯­è¨€ä¸€ä¸ªåˆ†æ”¯ã€‚
- å®‰è£…ï¼š

```javascript
yarn global add typescript
// å®‰è£…å®Œæ¯•åå†…ç½®äº†tscå‘½ä»¤(typescript compiler)
```

- æ‰‹åŠ¨ç¼–è¯‘

```javascript
// hello.ts
const fun = (name: string) => {
  console.log(name)
}
// ç¼–è¯‘æˆjsæ–‡ä»¶
tsc hello.ts
```

- ä¸€æ­¥åˆ°ä½è‡ªåŠ¨ç¼–è¯‘å¹¶æ‰§è¡Œ

```js
yarn global add ts-node
ts-node class.ts
```

- **åŸå§‹ç±»å‹**
  - numberã€stringã€nullã€undefinedã€booleanã€BigIntã€Symbol
- å®šä¹‰**åŸå§‹ç±»å‹**
  - æ³¨æ„ï¼šnull å’Œ undefined æ˜¯æ‰€æœ‰ç±»å‹çš„å­ç±»å‹
- å®šä¹‰**è”åˆç±»å‹**

```typescript
let numberOrString: string | number = 123
numberOrString = 'abc' âœ…
numberOrString = false ğŸš¨
```

- æ•°ç»„å’Œå…ƒç»„

```typescript
// * å®šä¹‰æ•°ç»„çš„æ–¹æ³•ä¸€
let arr: number[] = [1, 2, 3]
// * å…ƒç»„æ˜¯é™å®šäº†æ•°æ®ç±»å‹å’Œæ•°æ®é•¿åº¦çš„æ•°ç»„
let user: [stirng, number] = ["abc", 123] // æ•°æ®ç±»å‹å¯¹åº”ï¼Œé•¿åº¦å¯¹åº”ï¼Œä¸èƒ½å¤šä¹Ÿä¸èƒ½å°‘
```

- å¯¹è±¡/ç±»

  - å®šä¹‰å¯¹è±¡/ç±»éœ€è¦ä½¿ç”¨åˆ°`interface`æ¥å£
  - `interface`æ¥å£
    - ä¸¤ä¸ªå¸¸è§ç”¨é€”ï¼š1ã€å¯¹å¯¹è±¡çš„å½¢çŠ¶è¿›è¡Œæè¿°ï¼›2ã€å¯¹ç±»çš„å±æ€§è¿›è¡Œæè¿°ï¼›

- çº¦æŸå¯¹è±¡çš„å½¢çŠ¶ï¼ˆshapeï¼‰
  - å¿…é¡»ä¸¥æ ¼å¯¹åº”

```typescript
interface Person {
  readonly id: number
  name: string
  age?: number
}

let orime: Person = {
  name: "orime",
  age: 13,
}
```

- å‡½æ•°ç±»å‹å®šä¹‰çš„ä¸¤ç§å†™æ³•

  1. å‡½æ•°å£°æ˜å†™æ³•
  2. å‡½æ•°è¡¨è¾¾å¼å†™æ³•

- å‡½æ•°å£°æ˜

```typescript
function sum(x: number, y: number, z: number = 10): number {
  if (x) {
    return x + y + z
  } else {
    return x + y
  }
}
```

- å‡½æ•°è¡¨è¾¾å¼

```typescript
const sum2: (x: number, y: number, z: number = 19) => number = sum
```

- ç±»å‹æ¨æ–­

```typescript
let str = 'abc'
str = 123 ğŸš¨
```

- ç±»çš„ä½œç”¨
  - å¯ä»¥ç†è§£ä¸ºä¸€åˆ‡å®ä¾‹çš„æŠ½è±¡æ¨¡æ¿

> Tipsï¼šå­ç±»ä¸­ä½¿ç”¨ super æŒ‡å‘çˆ¶ç±»å¼•ç”¨
>![image.png](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/b7f6025c8c384b99b6138ea6e15ccc33~tplv-k3u1fbpfcp-zoom-1.image)


- ç±»å±æ€§ä¿®é¥°ç¬¦
  - publicï¼šé»˜è®¤ï¼Œå®ä¾‹æˆ–å­ç±»ä¸­éƒ½å¯ä»¥è®¿é—®/ä¿®æ”¹
  - readonlyï¼šåªè¯»ï¼Œåªèƒ½è®¿é—®ä¸èƒ½ä¿®æ”¹
  - privateï¼šåªèƒ½åœ¨å®šä¹‰ç±»çš„ä»£ç å—å†…è®¿é—®ï¼ˆå­ç±»/å®ä¾‹éƒ½ä¸èƒ½è®¿é—®ï¼‰
  - protectï¼šåªæœ‰å­ç±»å’Œè‡ªå·±èƒ½è®¿é—®ï¼ˆå®ä¾‹ä¸èƒ½è®¿é—®ï¼‰
  - staticï¼šé™æ€å±æ€§ï¼Œåªèƒ½ç±»å¯¹è±¡è‡ªå·±è°ƒç”¨ï¼ˆå½“è¿™ä¸ªå±æ€§/æ–¹æ³•å’Œå®ä¾‹/å­ç±»æ²¡æœ‰å¤ªå¤§å…³ç³»çš„æ—¶å€™å¯ä»¥ä½¿ç”¨ï¼‰
- implement

  - å½“ä¸¤ä¸ªç±»æœ‰å…¬å…±å±æ€§çš„æ—¶å€™ï¼Œå¦‚æœç”¨å­ç±»ç»§æ‰¿çˆ¶ç±»çš„æ–¹å¼æ˜¾å¾—ä¸å¤ªçµæ´»
  - è¿™æ—¶å€™å¯ä»¥å°†å…¬å…±å±æ€§ä½¿ç”¨ interface è¿›è¡Œå®šä¹‰ï¼Œå†ç”¨ implement è¿›è¡Œå®ç°
    - å®ç°å¤šä¸ªæ¥å£ç”¨é€—å·åˆ†éš”
    - æ¥å£è¿˜èƒ½è¿›è¡Œåˆå¹¶ï¼Œæ¯”å¦‚ `interface Battery extend Radio { ... }`

- Enum æšä¸¾ç±»å‹
  - ä½¿ç”¨`enum`å…³é”®å­—è¿›è¡Œå®šä¹‰
  - å®šä¹‰å¥½äº†è¿˜èƒ½ç›´æ¥å–å€¼
    - ç›´æ¥å–æ˜¯å–ç´¢å¼•ï¼Œä» 0 å¼€å§‹
    - ä½¿ç”¨ç´¢å¼•å–å–åˆ°çš„æ˜¯å­—ç¬¦ä¸²

```typescript
enum Direction {
  Up = 10, // *
  Down,
  Left,
  Right,
}

console.log(Direction.Up) // 10
console.log(Direction[12]) // Left

module.exports = {}
```

- enum å¸¸è§ç”¨æ³•

![image.png](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/4708474794a84a3c8b7ed97444931193~tplv-k3u1fbpfcp-zoom-1.image)

- ä¸åŠ å¸¸é‡æšä¸¾çš„ç¼–è¯‘ç»“æœ

![image.png](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/9def736c1ee7442a8b3bfdced36435e3~tplv-k3u1fbpfcp-zoom-1.image)

- åŠ å¸¸é‡æšä¸¾

![image.png](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/11114f46a0ec4313a0f06b129115d640~tplv-k3u1fbpfcp-zoom-1.image)

- æ³›å‹å¹¶ä¸éš¾ï¼Œè€å¿ƒçœ‹å¾ˆç®€å•

```typescript
function echo<T>(arg: T): T {
  return T
}

const res = echo("abc") // res -> string ç±»å‹
```

- æ³›å‹å°±åƒæ˜¯ä¸ªå½¢å‚å˜é‡ï¼ˆå ä½ç¬¦ï¼‰ï¼Œå®å‚æ˜¯`ç±»å‹`ï¼Œä½¿ç”¨çš„æ¥æ”¶æ‰‹åŠ¨ä¼ å…¥çš„æˆ–è‡ªåŠ¨æ¨å¯¼å‡ºçš„ç±»å‹å€¼

```typescript
function swap<T, U>(tuple: [T, U]): [U, T] {
  return [tuple[1], tuple[0]]
}

const result = swap(["abc", 123]) // result -> [number, string]
```

- æ³›å‹çº¦æŸ
  - å•ä¸€æ³›å‹æè¿°çš„å±æ€§ä¸å¤Ÿç”¨çš„æ—¶å€™ï¼Œå¯ä»¥ä½¿ç”¨`extends`å…³é”®å­—æ‰©å±•è¯¥æ³›å‹çš„å±æ€§

```typescript
interface IWithLength {
  length: number
}

function echoWithLength<T extends IWithLength>(arg: T): T {
  console.log(arg.length)
  return arg
}

const res = echoWithLength("abc") // ä¼ å…¥åªè¦æœ‰lengthå±æ€§çš„å€¼éƒ½å¯ä»¥
```

![image.png](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/fa49c6cfddde4b6e9ae579f5e2085af0~tplv-k3u1fbpfcp-zoom-1.image)

- ä½¿ç”¨æ³›å‹çº¦æŸç±»

```typescript
class Queue<T> {
  private data = []
  push(item: T) {
    this.data.push(item)
  }
  pop(): T {
    return this.data.shift()
  }
}

// * çº¦æŸäº†ä¼ å…¥å’Œå¼¹å‡ºçš„itemç±»å‹ä¸€è‡´ï¼Œç›¸æ¯”anyå¯è·å¾—æ›´å¥½çš„ç±»å‹æç¤º
const queue1 = new Queue<number>()

queue1.push(1)
queue1.push(3)
console.log(queue1.pop().toFixed(2))
```

- æ³›å‹å’Œæ¥å£`interface`ä¸€èµ·ä½¿ç”¨

```typescript
interface KeyPair<T, U> {
  key: T
  value: U
}

const obj1: KeyPair<string, number> = {
  key: "abc",
  value: 13,
}

const obj2: KeyPair<number, string> = {
  key: 12,
  value: "34",
}

console.log(obj1, obj2)

export {}
```

- å®šä¹‰æ•°ç»„çš„æ–¹å¼äºŒï¼šä½¿ç”¨æ³›å‹

```typescript
let arr: Array<number> = [1, 2, 3]
let arr1: number[] = [1, 2, 3]
```

- ä½¿ç”¨æ³›å‹ä¿®é¥°ä¸€ä¸ªå‡½æ•°

```typescript
interface IPlus<T> {
  (a: T, b: T): T
}
function plus(a: number, b: number): number {
  return a + b
}
function connect(a: string, b: string): string {
  return a + b
}

const plus1: IPlus<number> = plus
const connect1: IPlus<string> = connect

console.log(plus1(1, 2), connect1("a", "b")) // 3,ab

export {}
```

- ç±»å‹åˆ«åï¼ˆtype aliasesï¼‰
  - åœ¨è”åˆç±»å‹ä¸Šåº”ç”¨è¾ƒå¤š

```typescript
type NameResolver = () => string
type NameOrResolver = string | NameOrResolver
function getName(n: NameOrResolver) {
  if (typeof n === "string") {
    return n
  } else {
    return n()
  }
}
```

- ç±»å‹æ–­è¨€ï¼ˆtype assertionï¼‰å‘Šè¯‰ç¼–è¯‘å™¨ä½ æ¯”ä»–æ›´äº†è§£å½“å‰æ•°æ®ç±»å‹ï¼Œå¹¶è¦æ±‚å…¶ä¸å†ä¸ºæ­¤è€ŒæŠ¥é”™
  - ç±»å‹æ–­è¨€åªèƒ½æ–­è¨€ä¸ºè”åˆç±»å‹ä¸­å·²å­˜åœ¨çš„ä¸€ç§ç±»å‹

```typescript
function getLength(str: string | number): number {
  // * ä¸»æµå†™æ³•
  // const s = str as String // ! å¿…é¡»å¤§å†™ä¸º String
  // if(s.length) return s.length
  // else {
  //   const n = str as Number // ! å¿…é¡»å¤§å†™ä¸º Number
  //   return n.toString().length
  // }
  // * å¦ä¸€ç§å†™æ³• -> ä¸æ¨è
  if ((<string>str).length) {
    return (<string>str).length
  } else {
    return (<number>str).toString().length
  }
}

console.log(getLength(123)) // 3

export {}
```


- ç¬¬ä¸‰æ–¹åº“çš„å£°æ˜æ–‡ä»¶
  - å‚è€ƒ[å®˜æ–¹æ–‡æ¡£](https://ts.xcatliu.com/basics/declaration-files.html#%E5%B0%86%E5%A3%B0%E6%98%8E%E6%96%87%E4%BB%B6%E5%8F%91%E5%B8%83%E5%88%B0-types-%E4%B8%8B)
  - é¡¹ç›®ä¸­çš„å£°æ˜æ–‡ä»¶ä¸€èˆ¬æ˜¯ä»¥`*.d.ts`å½¢å¼æ”¾åˆ°`@types`æ–‡ä»¶å¤¹æˆ–å¦å¤–æŒ‡å®šçš„æ–‡ä»¶å¤¹ä¸‹
- å®šä¹‰å£°æ˜æ–‡ä»¶çš„æ–¹å¼ä¸€ï¼š
  - declare var å£°æ˜å…¨å±€å˜é‡
  - declare function å£°æ˜å…¨å±€æ–¹æ³•
  - declare class å£°æ˜å…¨å±€ç±»
  - declare enum å£°æ˜å…¨å±€æšä¸¾ç±»å‹
  - declare namespace å£°æ˜ï¼ˆå«æœ‰å­å±æ€§çš„ï¼‰å…¨å±€å¯¹è±¡
  - interface å’Œ type å£°æ˜å…¨å±€ç±»å‹

```typescript
// JQuery.d.ts
declear const JQuery: (selector: string) => void
```
- å®šä¹‰å£°æ˜æ–‡ä»¶çš„æ–¹å¼äºŒ
  - æ¯”å¦‚ jQuery æ˜¯ä¸€ä¸ªå…¨å±€å˜é‡ï¼Œå®ƒæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œæä¾›äº†ä¸€ä¸ª jQuery.ajax æ–¹æ³•å¯ä»¥è°ƒç”¨ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±åº”è¯¥ä½¿ç”¨ declare namespace jQuery æ¥å£°æ˜è¿™ä¸ªæ‹¥æœ‰å¤šä¸ªå­å±æ€§çš„å…¨å±€å˜é‡ã€‚

```typescript
// src/jQuery.d.ts

declare namespace jQuery {
  function ajax(url: string, settings?: any): void;
}
// src/index.ts

jQuery.ajax('/api/get_something');
```
  - æ³¨æ„ï¼Œåœ¨ declare namespace å†…éƒ¨ï¼Œæˆ‘ä»¬ç›´æ¥ä½¿ç”¨ function ajax æ¥å£°æ˜å‡½æ•°ï¼Œè€Œä¸æ˜¯ä½¿ç”¨ declare function ajaxã€‚ç±»ä¼¼çš„ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ const, class, enum ç­‰è¯­å¥9ï¼š

```typescript
// src/jQuery.d.ts

declare namespace jQuery {
    function ajax(url: string, settings?: any): void;
    const version: number;
    class Event {
        blur(eventType: EventType): void
    }
    enum EventType {
        CustomClick
    }
}
// src/index.ts

jQuery.ajax('/api/get_something');
console.log(jQuery.version);
const e = new jQuery.Event();
e.blur(jQuery.EventType.CustomClick);

```